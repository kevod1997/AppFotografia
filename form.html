<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formulario de Fotografía</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <form id="formulario-fotografia">
      <label for="fecha">Fecha y hora:</label>
      <input type="datetime-local" id="fecha" required /><br />

      <label for="direccion">Dirección:</label>
      <input type="text" id="direccion" required /><br />

      <label for="paquete">Paquete de fotos:</label>
      <select id="paquete" required>
        <option value='{"fotos": 30, "precio": 4000}'>30 fotos - $4000</option>
        <option value='{"fotos": 50, "precio": 6000}'>50 fotos - $6000</option>
        <option value='{"fotos": 70, "precio": 7500}'>70 fotos - $7500</option>
        <option value='{"fotos": 100, "precio": 9000}'>
          100 fotos - $9000
        </option>
        <option value='{"fotos": 150, "precio": 12000}'>
          150 fotos - $12000
        </option></select
      ><br />
      <label for="servicio">Servicio:</label>
      <select id="servicio" required>
        <option value="Casamiento">Casamiento</option>
        <option value="Comunion">Comunión</option>
        <option value="Bautismo">Bautismo</option>
        <option value="Evento">Evento</option>
        <option value="Fiesta">Fiesta</option>
        <option value="Sesion">Sesión</option></select
      ><br />

      <button type="submit">Enviar</button>
    </form>

    <script>
      function formatearFecha(fecha) {
        const fechaObj = new Date(fecha);
        const opcionesFecha = {
          year: "numeric",
          month: "long",
          day: "numeric",
        };
        const opcionesHora = {
          hour: "2-digit",
          minute: "2-digit",
        };

        const fechaFormateada = new Intl.DateTimeFormat(
          "es-AR",
          opcionesFecha
        ).format(fechaObj);
        const horaFormateada = new Intl.DateTimeFormat(
          "es-AR",
          opcionesHora
        ).format(fechaObj);

        return `${fechaFormateada} Hora: ${horaFormateada}`;
      }

      const preciosServicios = {
        Casamiento: 1.5,
        Comunion: 1.3,
        Bautismo: 1.2,
        Evento: 1.3,
        Fiesta: 1.4,
        Sesion: 1.0,
      };

      $(document).ready(function () {
        $("#formulario-fotografia").on("submit", function (event) {
          event.preventDefault();

          // Capturar datos
          const fecha = $("#fecha").val();
          const direccion = $("#direccion").val();
          const paqueteSeleccionado = JSON.parse($("#paquete").val());
          const fotos = paqueteSeleccionado.fotos;
          const precioPaquete = paqueteSeleccionado.precio;
          const servicio = $("#servicio").val();

          // Calcular costo total
          const multiplicadorServicio = preciosServicios[servicio];
          const costoTotal = precioPaquete * multiplicadorServicio;

          // Generar ticket (aquí puedes generar el ticket como prefieras)
          const fechaFormateada = formatearFecha(fecha);
          const ticket = {
            fecha: fechaFormateada,
            direccion: direccion,
            fotos: fotos,
            servicio: servicio,
            costoTotal: costoTotal.toFixed(2),
          };

          console.log(ticket);
          alert(
            `Has generado un ticket con los siguientes datos: \n Fecha: ${fechaFormateada} \n Dirección: ${direccion} \n Fotos: ${fotos} \n Servicio: ${servicio} \n Costo total: $${costoTotal.toFixed(
              2
            )}`
          );
          alert("Ticket generado con éxito");

          // Limpiar formulario
          $("#formulario-fotografia")[0].reset();
        });
      });
    </script>
  </body>
</html>
